(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{206:function(e,t,n){e.exports=n(363)},363:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(16),s=n.n(r),c=(n(38),n(47)),i=n.n(c),l=n(97),u=n(63),p=n(23),m=n(24),d=n(26),h=n(25),f=n(27),v=n(17),b=n(45),C=n.n(b),g=n(29),y=n.n(g),E=n(60),w=n.n(E),k=n(61),j=n.n(k),D=function(e){return e.every(function(e){return e.length>0})},O=n(135),N=function(e,t,n){var a=e.filter(function(e){return e.key===n})[0],o=e.indexOf(a);return{result:e.map(function(e,n){return o===n?Object(O.a)({},a,{question:t.question,inputType:t.inputType,answer:t.answer,condition:t.condition,childrensData:t.childrensData}):e})}},T=n(46),I=n(43),x=n.n(I),M=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).checkValidation=function(e){e.target.value&&e.target.name&&n.setState(Object(v.a)({},e.target.name,e.target.value),function(){return n.props.onComponentChange(n.state)})},n.state=Object(v.a)({},e.name,e.value),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement(x.a,{className:"input",value:this.state[this.props.name],onClick:this.checkValidation,name:this.props.name},this.props.data.map(function(e,t){return o.a.createElement(T.b,{className:"selectItem",value:e,key:t},e)}))}}]),t}(a.Component),S=n(57),q=n.n(S),B=n(36),V=n.n(B),A=n(58),P=n.n(A),Y=n(59),J=n.n(Y),G=n(44),L=n.n(G),Q=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).checkValidation=function(e){e.target.value&&e.target.name&&n.setState(Object(v.a)({},e.target.name,e.target.value),function(){return n.props.onComponentChange(n.state)})},n.switch=function(e){n.setState(Object(v.a)({},e.target.name,e.target.checked),function(){return n.props.onComponentChange(n.state)})},n.setControl=function(e){switch(e){case"radio":return o.a.createElement(q.a,{className:"input radio",label:"Answer",value:n.state[n.props.name],onChange:n.checkValidation,name:n.props.name},n.props.data.map(function(e,t){return o.a.createElement(V.a,{value:e,key:t,control:o.a.createElement(P.a,{color:"primary"}),label:e})}));case"checkbox":return o.a.createElement(T.a,{className:"input checkbox",label:"Answer",value:n.state[n.props.name],onChange:n.checkValidation,name:n.props.name},n.props.data.map(function(e,t){return o.a.createElement(V.a,{value:e,key:t,control:o.a.createElement(J.a,{color:"primary"}),label:e})}));case"switch":return o.a.createElement(T.a,{className:"input switch"},o.a.createElement(V.a,{control:o.a.createElement(L.a,{color:"primary",onChange:n.switch,name:n.props.name,checked:n.state[n.props.name]}),label:"Night Mode"}))}},n.state=Object(v.a)({},e.name,e.value),console.log(e),console.log(n.props.value),console.log(n.state[n.props.name]),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.setControl(this.props.control))}}]),t}(a.Component),R=n(30),W=n.n(R),z=n(62),F=n.n(z),H=n(37),K=n.n(H),U=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).deleteSelf=function(){n.props.onComponentDelete(n.props.selfIndex)},n.checkValidation=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value),function(){return n.props.onComponentChange(n.state,n.props.selfIndex)})},n.addComponent=function(){n.setState({childrensData:[].concat(Object(u.a)(n.state.childrensData),[{key:Date.now()+Math.random()}])},function(){return n.props.onComponentChange(n.state,n.props.selfIndex)})},n.deleteComponent=function(e){var t=n.state.childrensData.filter(function(t){return t.key!==e});n.setState({childrensData:t},function(){return n.props.onComponentChange(n.state,n.props.selfIndex)})},n.saveChildData=function(e,t){n.setState({childrensData:Object.values(N(n.state.childrensData,e,t))[0]},function(){return n.props.onComponentChange(n.state,n.props.selfIndex)})},n.changeInputType=function(e){n.setState(Object(v.a)({},Object.keys(e)[0],Object.values(e)[0]),function(){return n.props.onComponentChange(n.state,n.props.selfIndex)})},n.state={childrensData:void 0!==e.childrensData?Object.values(e.childrensData):[],question:void 0!==e.question?e.question:"",inputType:void 0!==e.inputType?e.inputType:"",answer:void 0!==e.answer?e.answer:"",condition:void 0!==e.condition?e.condition:"",mode:"night"},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,n=void 0===this.props.parentInputType?[this.state.question,this.state.inputType]:[this.state.question,this.state.inputType,this.state.answer,this.state.condition],a=this.state.childrensData.map(function(n){return o.a.createElement(t,{key:n.key,selfIndex:n.key,parentInputType:e.state.inputType,onComponentDelete:e.deleteComponent,onComponentChange:e.saveChildData,question:n.question,inputType:n.inputType,childrensData:n.childrensData,answer:n.answer,condition:n.condition}," ")});return o.a.createElement(w.a,{className:"card"},o.a.createElement(j.a,null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-12 inputContainer"},this.props.parentInputType?o.a.createElement(M,{id:Date.now()+Math.random(),name:"condition",value:this.state.condition,onComponentChange:this.changeInputType,data:"Number"===this.props.parentInputType?["Equals","Greather than","Less than"]:["Equals"]}):null),o.a.createElement("div",{className:"col-sm-12 inputContainer"},this.props.parentInputType?"Yes/No"!==this.props.parentInputType?o.a.createElement(C.a,{className:"input",label:"Answer",type:"Text"===this.props.parentInputType?"text":"number",value:this.state.answer,name:"answer",onChange:this.checkValidation,required:!0}):o.a.createElement(Q,{id:Date.now()+Math.random(),name:"answer",value:this.state.answer,onComponentChange:this.changeInputType,data:["Yes","No"],control:"radio"}):null),o.a.createElement("div",{className:"col-sm-12 inputContainer"},o.a.createElement(C.a,{className:"input",label:"Question",type:"text",value:this.state.question,name:"question",onChange:this.checkValidation,required:!0})),o.a.createElement("div",{className:"col-sm-12 inputContainer"},o.a.createElement(M,{id:Date.now()+Math.random(),name:"inputType",value:this.state.inputType,onComponentChange:this.changeInputType,data:["Text","Number","Yes/No"]})),o.a.createElement("div",{className:"col-sm-12 buttonContainer"},o.a.createElement(y.a,{className:"button",variant:"contained",color:"primary",disabled:!D(n),onClick:this.addComponent},o.a.createElement(K.a,null)," Add SubInput"),o.a.createElement(W.a,{className:"fabButton",color:"primary",disabled:!D(n),onClick:this.addComponent},o.a.createElement(K.a,null))),o.a.createElement("div",{className:"col-sm-12 buttonContainer"},o.a.createElement(y.a,{className:"button",variant:"contained",color:"secondary",onClick:this.deleteSelf},o.a.createElement(F.a,null)," Remove"),o.a.createElement(W.a,{className:"fabButton",color:"secondary",onClick:this.deleteSelf},o.a.createElement(F.a,null)))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-12"},a,o.a.createElement("p",null,this.props.selfIndex))))))}}]),t}(a.Component),X=function(){return new Promise(function(e,t){var n=window.indexedDB.open("database",1);n.onupgradeneeded=function(){n.result.createObjectStore("state",{keyPath:"id"})},n.onsuccess=function(){return e(n.result)},n.onerror=function(){return t(n.error)},n.onblocked=function(){alert("Blocked")}})},Z=function(e){return new Promise(function(t,n){var a=e.transaction("state","readonly").objectStore("state").get(1);a.onsuccess=function(){return t(a.result)},a.onerror=function(){return n(a.error)}})},$=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).addComponent=function(){n.setState({childrensData:[].concat(Object(u.a)(n.state.childrensData),[{key:Date.now()+Math.random()}])})},n.deleteComponent=function(e){n.setState({childrensData:n.state.childrensData.filter(function(t){return t.key!==e})})},n.generateComponents=function(e){console.log(e),void 0!==e&&n.setState({childrensData:Object.values(e.data.childrensData),nightMode:e.data.nightMode},function(){document.getElementsByTagName("body")[0].className=!0===n.state.nightMode?"night":""})},n.saveChildData=function(e,t){n.setState({childrensData:Object.values(N(n.state.childrensData,e,t))[0]})},n.changeMode=function(e){console.log(Object.values(e)),console.log(e.nightMode),n.setState({nightMode:e.nightMode},function(){document.getElementsByTagName("body")[0].className=!0===n.state.nightMode?"night":""})},n.state={childrensData:[],nightMode:null},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,n,a,o=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return t=e.sent,e.next=5,Z(t).then(Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.generateComponents(n);case 2:case"end":return e.stop()}},e,this)})));case 5:n=e.sent,a=[],window.onbeforeunload=function(){o.state.childrensData.forEach(function(e){a.push(e)}),X().then(function(e){t=e}).then(function(){var e,n;e=t,n=o.state,new Promise(function(t,a){var o=e.transaction("state","readwrite").objectStore("state").put({id:1,data:n});o.onsuccess=function(){return t(o.result)},o.onerror=function(){return a(o.error)}})})};case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.childrensData.map(function(t){return o.a.createElement(U,{key:t.key,selfIndex:t.key,onComponentDelete:e.deleteComponent,onComponentChange:e.saveChildData,question:t.question,inputType:t.inputType,childrensData:t.childrensData,answer:t.answer}," ")});return void 0!==this.state.nightMode?o.a.createElement("div",null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-12"},t))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-4 offset-sm-4 buttonContainer"},o.a.createElement(y.a,{className:"button",variant:"contained",color:"primary",onClick:this.addComponent},o.a.createElement(K.a,null)," Add Input"),o.a.createElement(W.a,{className:"fabButton",color:"primary",onClick:this.addComponent},o.a.createElement(K.a,null)),o.a.createElement(Q,{id:Date.now()+Math.random(),name:"nightMode",onComponentChange:this.changeMode,value:this.state.nightMode,control:"switch"}),console.log("render")))):null}}]),t}(a.Component);n(361);s.a.render(o.a.createElement($,null),document.getElementById("root"))},38:function(e,t,n){}},[[206,2,1]]]);
//# sourceMappingURL=main.06aa3dc6.chunk.js.map